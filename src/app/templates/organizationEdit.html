<!--

Portal Ochotnicy - http://ochotnicy.pl

Copyright (C) Pracownia badań i innowacji społecznych Stocznia

Development: TEONITE - http://teonite.com

-->
<div class="main-content-section">
    <div class="container">

        <div id="sticky-anchor"></div>
        <div id="sticky" class="title-bar negative-top user-menu-stick">
            <h1>{{ organization.fullname }}<span class="text-hide"> (edycja profilu organizacji)</span></h1>
            <a ng-click="submit()" class="btn purple join" ng-show="!success && !showLoader"><i class="fa fa-check"></i>zapisz zmiany <span class="corner left"></span></a>
            <a ng-click="doTheBack()" class="btn purple join" ng-show="success"><i class="fa fa-angle-double-left left"></i>Powrót<span class="corner left"></span></a>
            <button class="btn purple join" type="button" ng-show="showLoader" ng-disabled="true"><div loader loader-style="'height: 25px; width: 40px;'"></div></button>
        </div>

        <div class="container regular-content">
            <div class="full-width container">
                <div class="registration-finish row">
                    <form ng-submit="submit()" novalidate name="form">
                        <h2>Dane podstawowe<span> (<i class="fa fa-asterisk default"></i> - pola wymagane)</span></h2>

                        <div class="row">
                            <table class="col-md-9 col-xs-12">
                                <tr>
                                    <td class="col-xs-4"><label for="orga-name">Pełna nazwa organizacji</label></td>
                                    <td class="col-xs-7">
                                        <input type="text" placeholder="Podaj pełną nazwę organizacji" name="orgFullname" ng-minlength="2" ng-maxlength="255"
                                               id="orga-name" ng-model="organization.fullname"
                                               class="border-input" ng-required="true">
                                        <div ng-messages="form.orgFullname.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgFullname.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgFullname" model="organization.fullname" required="true" edit="true"></display-validate>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="short-orga-name">Skrócona nazwa organizacji</label>
                                    </td>
                                    <td class="col-xs-7">
                                        <input type="text" placeholder="Podaj skróconą nazwę organizacji" ng-model="organization.shortname" ng-minlength="3" ng-maxlength="255"
                                               id="short-orga-name" class="border-input" ng-required="true" name="orgShortname">
                                        <div ng-messages="form.orgShortname.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgShortname.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgShortname" model="organization.shortname" required="true" edit="true"></display-validate>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="orga-street">Ulica</label>
                                    </td>
                                    <td class="col-xs-7">
                                        <input type="text" ng-model="organization.street" ng-minlength="3" ng-maxlength="50" placeholder="Podaj ulicę"
                                               id="orga-street" class="border-input" ng-required="true" name="orgStreet">
                                        <div ng-messages="form.orgStreet.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgStreet.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgStreet" model="organization.street" required="true" edit="true"></display-validate>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="orga-house">Numer domu</label>
                                    </td>
                                    <td class="col-xs-7">
                                        <input type="text" ng-model="organization.house_number" ng-minlength="1" ng-maxlength="10" placeholder="Numer domu"
                                               id="orga-house" class="border-input" ng-required="true" name="orgHouse">
                                        <div ng-messages="form.orgHouse.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgHouse.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgHouse" model="organization.house_number" required="true" edit="true"></display-validate>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="orga-apartment">Numer mieszkania</label>
                                    </td>
                                    <td class="col-xs-7">
                                        <input type="text" ng-model="organization.apartment_number" placeholder="Numer mieszkania" ng-minlength="1" ng-maxlength="10"
                                               id="orga-apartment" class="border-input" name="orgApartment" ng-required="false">
                                        <div ng-messages="form.orgApartment.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgApartment.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgApartment" model="organization.apartment_number" required="false" edit="true"></display-validate>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="org-zip">Kod pocztowy</label>
                                    </td>
                                    <td class="col-xs-7">
                                        <input type="text" ng-model="organization.zipcode" ng-minlength="5" ng-maxlength="20" placeholder="Kod pocztowy"
                                               id="org-zip" class="border-input" ng-required="true" name="orgZip">
                                        <div ng-messages="form.orgZip.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgZip.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgZip" model="organization.zipcode" required="true" edit="true"></display-validate>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="org-city">Miasto</label>
                                    </td>
                                    <td class="col-xs-7">
                                        <input type="text" ng-model="organization.city" placeholder="Miasto" ng-minlength="3" ng-maxlength="50"
                                               id="org-city" class="border-input" ng-required="true" name="orgCity">
                                        <div ng-messages="form.orgCity.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgCity.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgCity" model="organization.city" required="true" edit="true"></display-validate>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="org-country">Państwo</label>
                                    </td>
                                    <td class="col-xs-7">
                                        <select id="org-country" chosen="{inherit_select_classes:true}" name="orgCountry"
                                            ng-model="organization.country"
                                            ng-options="item.code as item.name for item in countries"
                                            data-width="'100%'"
                                            class="border-input" ng-required="true"></select>
                                        <div ng-messages="form.orgCountry.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgCountry.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgCountry" model="organization.country" required="true" edit="true"></display-validate>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="orga-status">Typ organizacji</label></td>
                                    <td class="col-xs-7">
                                        <select class="border-input" id="orga-status" ng-model="organizationType" ng-options="organization as organization.name for organization in organizationTypes"
                                                ng-required="true" name="orgStatus">
                                        </select>
                                        <div ng-messages="form.orgStatus.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgStatus.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgStatus" model="organizationType" required="true" edit="true"></display-validate>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="krs-number">Numer KRS</label></td>
                                    <td class="col-xs-7 col-sm-3">
                                        <input type="text" placeholder="Np.: 0000484745" id="krs-number" name="orgKRS" ng-minlength="5" ng-maxlength="20"
                                               class="border-input" ng-required="organizationType.is_krs_required" ng-model="organization.krs">
                                        <div ng-messages="form.orgKRS.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgKRS.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <i class="fa fa-check green" ng-if="(!organizationType.is_krs_required && !form.orgKRS.$pristine || organizationType.is_krs_required) && form.orgKRS.$valid"></i>
                                        <i class="fa fa-close red" ng-if="!form.orgKRS.$pristine && form.orgKRS.$invalid"></i>
                                        <i class="fa fa-asterisk default" ng-if="organizationType.is_krs_required && !organization.krs.length && form.orgKRS.$pristine"></i>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="nip">NIP</label></td>
                                    <td class="col-xs-7 col-sm-3">
                                        <!--ng-pattern="/^((\d{3}[- ]\d{3}[- ]\d{2}[- ]\d{2})|(\d{3}[- ]\d{2}[- ]\d{2}[- ]\d{3}))$/"-->
                                        <input type="text" placeholder="Np.: 858-985-09-09" id="nip" name="orgNIP" ng-minlength="10" ng-maxlength="15"
                                               class="border-input" ng-required="organizationType.is_nip_required" ng-model="organization.nip">
                                        <div ng-messages="form.orgNIP.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgNIP.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <i class="fa fa-check green" ng-if="(!organizationType.is_nip_required && !form.orgNIP.$pristine || organizationType.is_nip_required) && form.orgNIP.$valid"></i>
                                        <i class="fa fa-close red" ng-if="!form.orgNIP.$pristine && form.orgNIP.$invalid"></i>
                                        <i class="fa fa-asterisk default" ng-if="organizationType.is_nip_required && !organization.nip.length && form.orgNIP.$pristine"></i>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="about-orga">Krótki opis organizacji</label>
                                    </td>
                                    <td class="col-xs-7">
                                        <textarea placeholder="Misja, cel prowadzonej działalności..." id="about-orga" name="orgAbout" ng-minlength="30" ng-maxlength="350"
                                                  class="textarea" ng-required="true" ng-model="organization.description" ui-tinymce="tinymceOptions"></textarea>
                                        <div ng-messages="form.orgAbout.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgAbout.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgAbout" model="organization.description" required="true" edit="true"></display-validate>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <h2>Twoje dane<span> (<i class="fa fa-asterisk default"></i> - pola wymagane)</span></h2>

                        <div class="row">
                            <table class="col-md-9 col-xs-12">
                                <tr>
                                    <td class="col-xs-4"><label for="orga-name-first-name">Imię</label></td>
                                    <td class="col-xs-7">
                                        <input type="text" placeholder="Podaj swoje imię" id="orga-name-first-name" name="orgFirstName" ng-minlength="2" ng-maxlength="30"
                                               class="border-input" ng-required="true" ng-model="user.first_name">
                                        <div ng-messages="form.orgFirstName.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgFirstName.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgFirstName" model="user.first_name" required="true" edit="true"></display-validate>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="orga-name-family-name">Nazwisko</label></td>
                                    <td class="col-xs-7">
                                        <input type="text" placeholder="Podaj swoje nazwisko" name="orgLastName" ng-minlength="3" ng-maxlength="30"
                                               id="orga-name-family-name" ng-model="user.last_name"
                                               class="border-input" ng-required="true">
                                        <div ng-messages="form.orgLastName.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgLastName.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgLastName" model="user.last_name" required="true" edit="true"></display-validate>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-xs-4"><label for="orga-phone-number">Numer telefonu</label></td>
                                    <td class="col-xs-7 col-sm-3">
                                        <input type="text" placeholder="Np. 630-520-410" id="orga-phone-number" name="orgPhone"
                                               class="border-input" ng-model="organization.phonenumber" ng-minlength="7" ng-maxlength="15">
                                        <div ng-messages="form.orgPhone.$error" ng-messages-include="errorMessages.html" ng-if="form.submitted || form.orgPhone.$dirty"></div>
                                    </td>
                                    <td class="col-xs-1">
                                        <display-validate element="form.orgPhone" model="organization.phonenumber" required="false" edit="true"></display-validate>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <h2>Logo organizacji</h2>

                        <div class="row registration-finish steps">
                            <table class="col-md-11 col-xs-12 row">
                                <tr>
                                    <td class="col-xs-12 col-md-6">
                                        <div id="offer-image">
                                            <div class="image">
                                                <input type="file" accept="image/jpeg,image/gif,image/png" ng-multiple="false"
                                                        ng-model="file" ng-file-select="onFileSelect($files)">
                                                <img ng-src="{{ getMediaUrl(filename, 'photo') }}" ng-show="filename && !(uploadFailed || fileTooBig)">
                                                <span ng-show="uploadFailed">Upload zdjęcia nie powiódł się.</span>
                                                <span ng-show="fileTooBig">Wybrane zdjęcie jest zbyt duże.</span>
                                                <span ng-show="!filename">Dodaj zdjęcie (max 5MB)</span>
                                                <div class="progress" ng-show="progressBar && !(uploadFailed || fileTooBig)">
                                                    <div class="progress-bar" role="progressbar" aria-valuenow="{{ progress }}"
                                                         ng-class="{'progress-bar-success': uploadSuccess, 'progress-bar-danger': uploadFailed}"
                                                         aria-valuemin="0" aria-valuemax="100" style="width: {{ progress }}%;">
                                                        {{ progress }}%
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="col-xs-12 col-md-5">
                                        <div class="comment">
                                            <p>Dodaj zdjęcie, które będzie widoczne na stronie.</p>

                                            <p>Upewnij się, że posiadasz prawa autorskie do wykorzystania zdjęcia oraz zgody
                                                osób widocznych na zdjęciu.</p>

                                            <p class="req-list">
                                                Minimalne wymiary: <span>350x218</span><br>
                                                Format: <span>JPEG, PNG</span><br>
                                                Maksymalny rozmiar: <span>5MB</span>
                                            </p>
                                            <span class="corner white-right"></span>
                                            <span class="arrow"></span>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <div class="sub-bar">
                            <p ng-show="error || userError || extendedError">Wystąpiły błędy podczas zapisu.</p>
                            <p ng-show="success">Zmiany zostały zapisane</p>
                            <button class="btn orange" type="button" ng-click="doTheBack()" ng-show="success"><i class="fa fa-angle-double-left left"></i>Powrót</button>
                            <button class="btn orange" type="submit" ng-show="!success && !showLoader"><i class="fa fa-check"></i>Zapisz zmiany</button>
                            <button class="btn orange" type="submit" ng-show="showLoader" ng-disabled="true">
                                <div loader loader-style="'height: 25px; width: 40px;'"></div>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div recommended-offers offers="promotedOffers" limit="4"></div>